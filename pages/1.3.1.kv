#:kivy 2.1.0

#:set this_file '1.3.1'

#:set point_size 6
#:set offset point_size / 2
#:set line_width 1.1

RootWidget:
    # import container
    container: container
    label_wid: main_message
    slider_y1: y1
    slider_y2: y2

    # fill the container
    BoxLayout:
        id: container
        orientation: 'vertical'
        padding: 0
        spacing: 3

        # fill the canvas
        GridLayout:
            rows: 2
            orientation: 'bt-rl' # Slider needs to be specified first, but display order can be changed

            BoxLayout:  # Empty space
                size_hint: (0.075, 0.075)  # Buttom-left
            BoxLayout:  # Space for vertical (right) slider
                size_hint: (0.075, 0.925)  # Top-left
                Slider:
                    id: y2
                    on_value: root.cap1_sec3_pag1()  # Call the code on event
                    min: 0
                    max: 180
                    value: 0
                    step: 1
                    orientation: 'vertical'
            BoxLayout:
                size_hint: (1, 0.075)
                Label:
                    size_hint: (0.2, None)  # To leave 20% free to the left
                Slider:
                    id: y1
                    on_value: root.cap1_sec3_pag1()  # Call the code on event
                    min: 0
                    max: 360
                    value: 0
                    step: 1
                    orientation: 'horizontal'
                Label:
                    size_hint: (0.2, None)    # To leave 20% free to the right
            BoxLayout:  # Space for canvas
                size_hint: (0.925, 0.925)  # Top-right
                canvas:
                    Color:
                        rgba: cafe_claro
                    Line:  # Rotating line 2
                        points: root.p_2
                        width: line_width
                    Ellipse:  # Pivot point for right side of rotatign line 2
                        pos: root.p_4
                        size: point_size, point_size

                    Color:
                        rgba: blanco
                    Line:  # Rotating line 1
                        points: root.p_1
                        width: line_width

                    Color:
                        rgba: verde
                    Line:  # Arc describing angle from line 2 to line 1 CCW
                        circle: root.width/2, root.height*3/4, min(root.width, root.height/2)/3.5, 90-y2.value, 90-y1.value  # (center_x, center_y, radius, angle_start, angle_end, segments)
                        width: line_width

                    Color:
                        rgba: rojo
                    Line:  # Arc describing angle from line 2 to line 1 CW
                        circle: root.width/2, root.height*3/4, min(root.width, root.height/2)/4, -90-y2.value, 90-y1.value  # (center_x, center_y, radius, angle_start, angle_end, segments)
                        width: line_width

                    Color:
                        rgba: azul
                    Ellipse:  # Pivot point for rotatign lines
                        pos: root.p_3
                        size: point_size, point_size

                Label:
                    id: main_message
                    text_size: self.size
                    halign: 'center'
                    valign: 'top'
                    markup: True


        RstDocument:
            canvas.before:
                Color:
                    rgba: notes_background_color
                Rectangle:
                    pos: self.pos
                    size: self.size
            source: rst_files_folder + this_file + ".rst"
